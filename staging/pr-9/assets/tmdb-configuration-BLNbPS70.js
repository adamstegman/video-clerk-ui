import{j as n}from"./jsx-runtime-u17CrQMm.js";import{a as r}from"./chunk-JMJ3UQ3L-DtOYCHaw.js";class p{constructor(t){this.apiToken=t}async fetchConfiguration(){const t=await fetch("https://api.themoviedb.org/3/configuration",this.fetchOptions());if(!t.ok)throw new Error(`Error ${t.status}: ${await t.text()}`);return t.json()}async multiSearch(t){const e=await fetch(`https://api.themoviedb.org/3/search/multi?query=${encodeURIComponent(t)}`,this.fetchOptions());if(!e.ok)throw new Error(`Error ${e.status}: ${await e.text()}`);return e.json()}async fetchMovieGenres(){const t=await fetch("https://api.themoviedb.org/3/genre/movie/list",this.fetchOptions());if(!t.ok)throw new Error(`Error ${t.status}: ${await t.text()}`);return t.json()}async fetchTVGenres(){const t=await fetch("https://api.themoviedb.org/3/genre/tv/list",this.fetchOptions());if(!t.ok)throw new Error(`Error ${t.status}: ${await t.text()}`);return t.json()}async fetchMovieDetails(t){const e=await fetch(`https://api.themoviedb.org/3/movie/${t}`,this.fetchOptions());if(!e.ok)throw new Error(`Error ${e.status}: ${await e.text()}`);return e.json()}async fetchTVDetails(t){const e=await fetch(`https://api.themoviedb.org/3/tv/${t}`,this.fetchOptions());if(!e.ok)throw new Error(`Error ${e.status}: ${await e.text()}`);return e.json()}fetchOptions(t="GET"){return{method:t,headers:{accept:"application/json",Authorization:`Bearer ${this.apiToken}`}}}}const a=r.createContext(null);function m({children:s}){const t=r.useMemo(()=>new p("eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI3ZDE0ZTM3MWRlNTQwYjU1Mjc0MWZhMTQ4MDAyMDY3ZSIsIm5iZiI6MTc2NTcyMzMwNC4wMzAwMDAyLCJzdWIiOiI2OTNlY2NhODA3ZjNmMjY4NGMyMjZkNmYiLCJzY29wZXMiOlsiYXBpX3JlYWQiXSwidmVyc2lvbiI6MX0.TL3EEct7slq1CSkUw-ItzS1hYgkljY7azOOzGVjZG6o"),[]);return n.jsx(a,{value:t,children:s})}const c={change_keys:[],images:{base_url:null,secure_base_url:null,backdrop_sizes:[],logo_sizes:[],poster_sizes:[],profile_sizes:[],still_sizes:[]},error:null},l=r.createContext(c);function g({children:s}){const t=r.useContext(a),[e,h]=r.useState(c),[u,i]=r.useState(null);return r.useEffect(()=>{if(!t)return;async function f(){if(t){i(null);try{const o=await t.fetchConfiguration();o&&h({...o})}catch(o){console.error("Failed to fetch TMDB configuration",o),o instanceof Error?i(o.message):i("An unexpected error occurred")}}}f()},[t]),n.jsx(l,{value:{...e,error:u},children:s})}export{m as T,g as a,l as b,a as c};
